<template>
  <div class="trace_container">
    <div style="display: flex;flex: 1;justify-content: center;align-items: center">
      <div>
        <vs-input v-model="cardId" placeholder="请输入身份证号码查询公益溯源信息" style="width: 600px;height: 50px">
          <template #icon>
            <vs-icon><SearchFavorite1Bold /></vs-icon>
          </template>
        </vs-input>
      </div>
      <div>
        <vs-button type="relief" color="success" style="width: 80px;height: 45px" @click="handleSearch">搜索</vs-button>
      </div>
    </div>

    <div class="trace_table">
      <div class="table__card">
        <div class="card__title">
          物资捐赠溯源记录
        </div>
        <div>
          <div v-if="activiteTotal == 0" style="padding: 20px 20px">
            <svg xmlns="http://www.w3.org/2000/svg"  fill="none" version="1.1" width="190" height="150" viewBox="0 0 190 150"><defs><linearGradient x1="0.5" y1="0" x2="0.5" y2="1" id="master_svg0__05"><stop offset="0%" stop-color="#E3ECFA" stop-opacity="1"/><stop offset="100%" stop-color="#DAE7FF" stop-opacity="1"/></linearGradient><filter id="master_svg1_0_715" filterUnits="objectBoundingBox" color-interpolation-filters="sRGB" x="-12" y="-9" width="169" height="59"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/><feOffset dy="3" dx="0"/><feGaussianBlur stdDeviation="3"/><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.16099999845027924 0"/><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"/></filter><filter id="master_svg2_0_725" filterUnits="objectBoundingBox" color-interpolation-filters="sRGB" x="-12" y="-9" width="169" height="59"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/><feOffset dy="3" dx="0"/><feGaussianBlur stdDeviation="3"/><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.16099999845027924 0"/><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"/></filter></defs><g><g><path d="M75,150C116.421,150,150,116.421,150,75C150,33.5786,116.421,0,75,0C33.5786,0,0,33.5786,0,75C0,116.421,33.5786,150,75,150C75,150,75,150,75,150Z" fill="url(#master_svg0__05)" fill-opacity="1"/></g><g><g><g filter="url(#master_svg1_0_715)"><g><path d="M41,34C41,34,176,34,176,34C177.326,34,178.598,34.526784,179.536,35.46447C180.473,36.40215,181,37.67392,181,39C181,39,181,64,181,64C181,65.3261,180.473,66.59790000000001,179.536,67.5355C178.598,68.47319999999999,177.326,69,176,69C176,69,41,69,41,69C39.67392,69,38.40215,68.47319999999999,37.46447,67.5355C36.526784,66.59790000000001,36,65.3261,36,64C36,64,36,39,36,39C36,37.67392,36.526784,36.40215,37.46447,35.46447C38.40215,34.526784,39.67392,34,41,34C41,34,41,34,41,34C41,34,41,34,41,34Z" fill="#FFFFFF" fill-opacity="1"/></g></g><g><g><path d="M105,42C105,42,79,42,79,42C77.34315,42,76,43.34315,76,45C76,46.65685,77.34315,48,79,48C79,48,105,48,105,48C106.65690000000001,48,108,46.65685,108,45C108,43.34315,106.65690000000001,42,105,42C105,42,105,42,105,42Z" fill="#B4DAFF" fill-opacity="1"/></g><g><path d="M123,55C123,55,79,55,79,55C77.34315,55,76,56.34315,76,58C76,59.65685,77.34315,61,79,61C79,61,123,61,123,61C124.65690000000001,61,126,59.65685,126,58C126,56.34315,124.65690000000001,55,123,55C123,55,123,55,123,55Z" fill="#DEE9FC" fill-opacity="1"/></g></g><g><g><path d="M68,51.5C68,43.49187,61.5081,37,53.5,37C45.49187,37,39,43.49187,39,51.5C39,59.5081,45.49187,66,53.5,66C61.5081,66,68,59.5081,68,51.5C68,51.5,68,51.5,68,51.5Z" fill="#1485FD" fill-opacity="1"/></g><g><g><path d="M52.599998850097656,56.194007568359375C53.84134885009766,56.193807568359375,55.04695885009765,55.77840756835938,56.02499885009766,55.014007568359375C56.02499885009766,55.014007568359375,59.09995885009766,58.08900756835938,59.09995885009766,58.08900756835938C59.09995885009766,58.08900756835938,60.088958850097654,57.10000756835937,60.088958850097654,57.10000756835937C60.088958850097654,57.10000756835937,57.012958850097654,54.02400756835937,57.012958850097654,54.02400756835937C57.785858850097654,53.024817568359374,58.197458850097654,51.79332756835937,58.18075885009766,50.530257568359374C58.16415885009766,49.26717756835937,57.720158850097654,48.046977568359374,56.92121885009766,47.06852756835937C56.122288850097654,46.090077568359376,55.01552885009765,45.41106756835938,53.781298850097656,45.14215256835938C52.54706885009766,44.873238568359376,51.25813885009766,45.03027876835937,50.12458885009766,45.58767956835938C48.991028850097656,46.145077568359376,48.079688850097654,47.06997756835938,47.53907385009766,48.21163756835938C46.99846200009765,49.35328756835938,46.86046085009766,50.64439756835937,47.14755985009766,51.87451756835937C47.43465985009766,53.104647568359375,48.129928850097656,54.20126756835938,49.12006885009765,54.985667568359375C50.11019885009765,55.77010756835938,51.33681885009766,56.19600756835938,52.599998850097656,56.194007568359375C52.599998850097656,56.194007568359375,52.599998850097656,56.194007568359375,52.599998850097656,56.194007568359375C52.599998850097656,56.194007568359375,52.599998850097656,56.194007568359375,52.599998850097656,56.194007568359375ZM52.599998850097656,46.40000756835938C53.43067885009766,46.40000756835938,54.24270885009766,46.64633756835938,54.93339885009766,47.10783756835937C55.62407885009766,47.56933756835937,56.162408850097655,48.22528756835938,56.480298850097654,48.992737568359374C56.798178850097656,49.76018756835938,56.881358850097655,50.604667568359375,56.71929885009766,51.419387568359376C56.557238850097654,52.23410756835938,56.15722885009765,52.98247756835937,55.56984885009766,53.569857568359375C54.98246885009765,54.15723756835938,54.23409885009766,54.55724756835937,53.41937885009766,54.719307568359376C52.60465885009766,54.88136756835937,51.76017885009766,54.798187568359374,50.992728850097656,54.480297568359376C50.22527885009766,54.16241756835937,49.569328850097655,53.62408756835937,49.107828850097654,52.933397568359375C48.64632885009765,52.242717568359375,48.39999885009766,51.430687568359374,48.39999885009766,50.60000756835937C48.39999885009766,49.48609756835938,48.842498850097655,48.41780756835937,49.630148850097655,47.63015756835937C50.41780885009766,46.84250756835937,51.48608885009766,46.40000756835938,52.599998850097656,46.40000756835938C52.599998850097656,46.40000756835938,52.599998850097656,46.40000756835938,52.599998850097656,46.40000756835938C52.599998850097656,46.40000756835938,52.599998850097656,46.40000756835938,52.599998850097656,46.40000756835938Z" fill="#FFFFFF" fill-opacity="1"/></g></g></g></g><g><g filter="url(#master_svg2_0_725)"><g><path d="M161,79C161,79,26,79,26,79C23.23858,79,21,81.23858,21,84C21,84,21,109,21,109C21,111.76140000000001,23.23858,114,26,114C26,114,161,114,161,114C163.761,114,166,111.76140000000001,166,109C166,109,166,84,166,84C166,81.23858,163.761,79,161,79C161,79,161,79,161,79Z" fill="#FFFFFF" fill-opacity="1"/></g></g><g><g><path d="M90,87C90,87,64,87,64,87C62.34315,87,61,88.34315,61,90C61,91.65685,62.34315,93,64,93C64,93,90,93,90,93C91.65690000000001,93,93,91.65685,93,90C93,88.34315,91.65690000000001,87,90,87C90,87,90,87,90,87Z" fill="#B4DAFF" fill-opacity="1"/></g><g><path d="M108,100C108,100,64,100,64,100C62.34315,100,61,101.34315,61,103C61,104.65685,62.34315,106,64,106C64,106,108,106,108,106C109.65690000000001,106,111,104.65685,111,103C111,101.34315,109.65690000000001,100,108,100C108,100,108,100,108,100Z" fill="#DEE9FC" fill-opacity="1"/></g></g><g><g><path d="M53,96.5C53,88.49187,46.5081,82,38.5,82C30.49187,82,24,88.49187,24,96.5C24,104.5081,30.49187,111,38.5,111C46.5081,111,53,104.5081,53,96.5C53,96.5,53,96.5,53,96.5Z" fill="#1485FD" fill-opacity="1"/></g><g><g><path d="M37.599998850097656,101.19400756835938C38.84134885009766,101.19380756835938,40.04695885009765,100.77840756835937,41.02499885009766,100.01400756835938C41.02499885009766,100.01400756835938,44.09995885009766,103.08900756835938,44.09995885009766,103.08900756835938C44.09995885009766,103.08900756835938,45.088958850097654,102.10000756835937,45.088958850097654,102.10000756835937C45.088958850097654,102.10000756835937,42.012958850097654,99.02400756835938,42.012958850097654,99.02400756835938C42.785858850097654,98.02481756835937,43.197458850097654,96.79332756835937,43.18075885009766,95.53025756835937C43.16415885009766,94.26717756835937,42.720158850097654,93.04697756835938,41.92121885009766,92.06852756835937C41.122288850097654,91.09007756835938,40.01552885009765,90.41106756835937,38.781298850097656,90.14215256835938C37.54706885009766,89.87323856835937,36.25813885009766,90.03027876835938,35.12458885009766,90.58767956835938C33.991028850097656,91.14507756835937,33.079688850097654,92.06997756835938,32.53907385009766,93.21163756835938C31.998462000097657,94.35328756835938,31.860460850097656,95.64439756835938,32.14755985009766,96.87451756835938C32.43465985009766,98.10464756835938,33.129928850097656,99.20126756835937,34.12006885009765,99.98566756835937C35.11019885009765,100.77010756835938,36.33681885009766,101.19600756835938,37.599998850097656,101.19400756835938C37.599998850097656,101.19400756835938,37.599998850097656,101.19400756835938,37.599998850097656,101.19400756835938C37.599998850097656,101.19400756835938,37.599998850097656,101.19400756835938,37.599998850097656,101.19400756835938ZM37.599998850097656,91.40000756835937C38.43067885009766,91.40000756835937,39.24270885009766,91.64633756835937,39.93339885009766,92.10783756835937C40.62407885009766,92.56933756835937,41.162408850097655,93.22528756835938,41.480298850097654,93.99273756835937C41.798178850097656,94.76018756835937,41.881358850097655,95.60466756835937,41.71929885009766,96.41938756835937C41.557238850097654,97.23410756835938,41.15722885009765,97.98247756835937,40.56984885009766,98.56985756835937C39.98246885009765,99.15723756835938,39.23409885009766,99.55724756835937,38.41937885009766,99.71930756835937C37.60465885009766,99.88136756835938,36.76017885009766,99.79818756835937,35.992728850097656,99.48029756835938C35.22527885009766,99.16241756835937,34.569328850097655,98.62408756835937,34.107828850097654,97.93339756835937C33.64632885009765,97.24271756835938,33.39999885009766,96.43068756835937,33.39999885009766,95.60000756835937C33.39999885009766,94.48609756835937,33.842498850097655,93.41780756835938,34.630148850097655,92.63015756835938C35.41780885009766,91.84250756835938,36.48608885009766,91.40000756835937,37.599998850097656,91.40000756835937C37.599998850097656,91.40000756835937,37.599998850097656,91.40000756835937,37.599998850097656,91.40000756835937C37.599998850097656,91.40000756835937,37.599998850097656,91.40000756835937,37.599998850097656,91.40000756835937Z" fill="#FFFFFF" fill-opacity="1"/></g></g></g></g></g></g></svg>
          </div>
          <vs-table style="width: 100%" v-if="activiteTotal != 0">
            <template #thead>
              <vs-tr>
                <vs-th style="width: 320px"> 捐赠账户 </vs-th>
                <vs-th style="width: 100px"> 物资名称 </vs-th>
                <vs-th style="width: 80px"> 物资类型 </vs-th>
                <vs-th style="width: 80px"> 物资数量 </vs-th>
                <vs-th style="width: 180px"> 发货时间 </vs-th>
                <vs-th style="width: 80px"> 签收状态 </vs-th>
                <vs-th style="width: 320px"> 物流账户 </vs-th>
                <vs-th style="width: 80px"> 操作 </vs-th>
              </vs-tr>
            </template>
            <template #tbody>
              <vs-tr
                  v-for="(item, i) in getPage(activiteTrace, queryParams.pageNum, queryParams.pageSize)"
                  :key="i"
                  :data="item"
              >
                <vs-td>
                  {{item.sourceAddress}}
                </vs-td>
                <vs-td>
                  {{item.materialName}}
                </vs-td>
                <vs-td>
                  {{item.materialType}}
                </vs-td>
                <vs-td>
                  {{item.materialCount}}
                </vs-td>
                <vs-td>
                  {{item.transTime}}
                </vs-td>
                <vs-td>
                  {{item.isSign}}
                </vs-td>
                <vs-td>
                  {{item.logisticAddress}}
                </vs-td>
                <vs-td>
                  <div class="view" @click="handleOpenActiviteDialog(item)">
                    🍳
                  </div>
                </vs-td>
              </vs-tr>
            </template>
            <template #footer>
              <vs-pagination
                  v-model:current-page="queryParams.pageNum"
                  v-model:page-size="queryParams.pageSize"
                  :page-sizes="[3, 5, 7]"
                  :total="activiteTotal"
                  not-margin
              />
            </template>
          </vs-table>
        </div>
      </div>
      <div class="table__card">
        <div class="card__title">
          公益捐款溯源记录
        </div>
        <div>
          <div v-if="donationTotal == 0" style="padding: 20px 20px">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="none" version="1.1" width="190" height="150" viewBox="0 0 190 150"><defs><linearGradient x1="0.5" y1="0" x2="0.5" y2="1" id="master_svg0__05"><stop offset="0%" stop-color="#E3ECFA" stop-opacity="1"/><stop offset="100%" stop-color="#DAE7FF" stop-opacity="1"/></linearGradient><filter id="master_svg1_0_715" filterUnits="objectBoundingBox" color-interpolation-filters="sRGB" x="-12" y="-9" width="169" height="59"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/><feOffset dy="3" dx="0"/><feGaussianBlur stdDeviation="3"/><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.16099999845027924 0"/><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"/></filter><filter id="master_svg2_0_725" filterUnits="objectBoundingBox" color-interpolation-filters="sRGB" x="-12" y="-9" width="169" height="59"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/><feOffset dy="3" dx="0"/><feGaussianBlur stdDeviation="3"/><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.16099999845027924 0"/><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"/></filter></defs><g><g><path d="M75,150C116.421,150,150,116.421,150,75C150,33.5786,116.421,0,75,0C33.5786,0,0,33.5786,0,75C0,116.421,33.5786,150,75,150C75,150,75,150,75,150Z" fill="url(#master_svg0__05)" fill-opacity="1"/></g><g><g><g filter="url(#master_svg1_0_715)"><g><path d="M41,34C41,34,176,34,176,34C177.326,34,178.598,34.526784,179.536,35.46447C180.473,36.40215,181,37.67392,181,39C181,39,181,64,181,64C181,65.3261,180.473,66.59790000000001,179.536,67.5355C178.598,68.47319999999999,177.326,69,176,69C176,69,41,69,41,69C39.67392,69,38.40215,68.47319999999999,37.46447,67.5355C36.526784,66.59790000000001,36,65.3261,36,64C36,64,36,39,36,39C36,37.67392,36.526784,36.40215,37.46447,35.46447C38.40215,34.526784,39.67392,34,41,34C41,34,41,34,41,34C41,34,41,34,41,34Z" fill="#FFFFFF" fill-opacity="1"/></g></g><g><g><path d="M105,42C105,42,79,42,79,42C77.34315,42,76,43.34315,76,45C76,46.65685,77.34315,48,79,48C79,48,105,48,105,48C106.65690000000001,48,108,46.65685,108,45C108,43.34315,106.65690000000001,42,105,42C105,42,105,42,105,42Z" fill="#B4DAFF" fill-opacity="1"/></g><g><path d="M123,55C123,55,79,55,79,55C77.34315,55,76,56.34315,76,58C76,59.65685,77.34315,61,79,61C79,61,123,61,123,61C124.65690000000001,61,126,59.65685,126,58C126,56.34315,124.65690000000001,55,123,55C123,55,123,55,123,55Z" fill="#DEE9FC" fill-opacity="1"/></g></g><g><g><path d="M68,51.5C68,43.49187,61.5081,37,53.5,37C45.49187,37,39,43.49187,39,51.5C39,59.5081,45.49187,66,53.5,66C61.5081,66,68,59.5081,68,51.5C68,51.5,68,51.5,68,51.5Z" fill="#1485FD" fill-opacity="1"/></g><g><g><path d="M52.599998850097656,56.194007568359375C53.84134885009766,56.193807568359375,55.04695885009765,55.77840756835938,56.02499885009766,55.014007568359375C56.02499885009766,55.014007568359375,59.09995885009766,58.08900756835938,59.09995885009766,58.08900756835938C59.09995885009766,58.08900756835938,60.088958850097654,57.10000756835937,60.088958850097654,57.10000756835937C60.088958850097654,57.10000756835937,57.012958850097654,54.02400756835937,57.012958850097654,54.02400756835937C57.785858850097654,53.024817568359374,58.197458850097654,51.79332756835937,58.18075885009766,50.530257568359374C58.16415885009766,49.26717756835937,57.720158850097654,48.046977568359374,56.92121885009766,47.06852756835937C56.122288850097654,46.090077568359376,55.01552885009765,45.41106756835938,53.781298850097656,45.14215256835938C52.54706885009766,44.873238568359376,51.25813885009766,45.03027876835937,50.12458885009766,45.58767956835938C48.991028850097656,46.145077568359376,48.079688850097654,47.06997756835938,47.53907385009766,48.21163756835938C46.99846200009765,49.35328756835938,46.86046085009766,50.64439756835937,47.14755985009766,51.87451756835937C47.43465985009766,53.104647568359375,48.129928850097656,54.20126756835938,49.12006885009765,54.985667568359375C50.11019885009765,55.77010756835938,51.33681885009766,56.19600756835938,52.599998850097656,56.194007568359375C52.599998850097656,56.194007568359375,52.599998850097656,56.194007568359375,52.599998850097656,56.194007568359375C52.599998850097656,56.194007568359375,52.599998850097656,56.194007568359375,52.599998850097656,56.194007568359375ZM52.599998850097656,46.40000756835938C53.43067885009766,46.40000756835938,54.24270885009766,46.64633756835938,54.93339885009766,47.10783756835937C55.62407885009766,47.56933756835937,56.162408850097655,48.22528756835938,56.480298850097654,48.992737568359374C56.798178850097656,49.76018756835938,56.881358850097655,50.604667568359375,56.71929885009766,51.419387568359376C56.557238850097654,52.23410756835938,56.15722885009765,52.98247756835937,55.56984885009766,53.569857568359375C54.98246885009765,54.15723756835938,54.23409885009766,54.55724756835937,53.41937885009766,54.719307568359376C52.60465885009766,54.88136756835937,51.76017885009766,54.798187568359374,50.992728850097656,54.480297568359376C50.22527885009766,54.16241756835937,49.569328850097655,53.62408756835937,49.107828850097654,52.933397568359375C48.64632885009765,52.242717568359375,48.39999885009766,51.430687568359374,48.39999885009766,50.60000756835937C48.39999885009766,49.48609756835938,48.842498850097655,48.41780756835937,49.630148850097655,47.63015756835937C50.41780885009766,46.84250756835937,51.48608885009766,46.40000756835938,52.599998850097656,46.40000756835938C52.599998850097656,46.40000756835938,52.599998850097656,46.40000756835938,52.599998850097656,46.40000756835938C52.599998850097656,46.40000756835938,52.599998850097656,46.40000756835938,52.599998850097656,46.40000756835938Z" fill="#FFFFFF" fill-opacity="1"/></g></g></g></g><g><g filter="url(#master_svg2_0_725)"><g><path d="M161,79C161,79,26,79,26,79C23.23858,79,21,81.23858,21,84C21,84,21,109,21,109C21,111.76140000000001,23.23858,114,26,114C26,114,161,114,161,114C163.761,114,166,111.76140000000001,166,109C166,109,166,84,166,84C166,81.23858,163.761,79,161,79C161,79,161,79,161,79Z" fill="#FFFFFF" fill-opacity="1"/></g></g><g><g><path d="M90,87C90,87,64,87,64,87C62.34315,87,61,88.34315,61,90C61,91.65685,62.34315,93,64,93C64,93,90,93,90,93C91.65690000000001,93,93,91.65685,93,90C93,88.34315,91.65690000000001,87,90,87C90,87,90,87,90,87Z" fill="#B4DAFF" fill-opacity="1"/></g><g><path d="M108,100C108,100,64,100,64,100C62.34315,100,61,101.34315,61,103C61,104.65685,62.34315,106,64,106C64,106,108,106,108,106C109.65690000000001,106,111,104.65685,111,103C111,101.34315,109.65690000000001,100,108,100C108,100,108,100,108,100Z" fill="#DEE9FC" fill-opacity="1"/></g></g><g><g><path d="M53,96.5C53,88.49187,46.5081,82,38.5,82C30.49187,82,24,88.49187,24,96.5C24,104.5081,30.49187,111,38.5,111C46.5081,111,53,104.5081,53,96.5C53,96.5,53,96.5,53,96.5Z" fill="#1485FD" fill-opacity="1"/></g><g><g><path d="M37.599998850097656,101.19400756835938C38.84134885009766,101.19380756835938,40.04695885009765,100.77840756835937,41.02499885009766,100.01400756835938C41.02499885009766,100.01400756835938,44.09995885009766,103.08900756835938,44.09995885009766,103.08900756835938C44.09995885009766,103.08900756835938,45.088958850097654,102.10000756835937,45.088958850097654,102.10000756835937C45.088958850097654,102.10000756835937,42.012958850097654,99.02400756835938,42.012958850097654,99.02400756835938C42.785858850097654,98.02481756835937,43.197458850097654,96.79332756835937,43.18075885009766,95.53025756835937C43.16415885009766,94.26717756835937,42.720158850097654,93.04697756835938,41.92121885009766,92.06852756835937C41.122288850097654,91.09007756835938,40.01552885009765,90.41106756835937,38.781298850097656,90.14215256835938C37.54706885009766,89.87323856835937,36.25813885009766,90.03027876835938,35.12458885009766,90.58767956835938C33.991028850097656,91.14507756835937,33.079688850097654,92.06997756835938,32.53907385009766,93.21163756835938C31.998462000097657,94.35328756835938,31.860460850097656,95.64439756835938,32.14755985009766,96.87451756835938C32.43465985009766,98.10464756835938,33.129928850097656,99.20126756835937,34.12006885009765,99.98566756835937C35.11019885009765,100.77010756835938,36.33681885009766,101.19600756835938,37.599998850097656,101.19400756835938C37.599998850097656,101.19400756835938,37.599998850097656,101.19400756835938,37.599998850097656,101.19400756835938C37.599998850097656,101.19400756835938,37.599998850097656,101.19400756835938,37.599998850097656,101.19400756835938ZM37.599998850097656,91.40000756835937C38.43067885009766,91.40000756835937,39.24270885009766,91.64633756835937,39.93339885009766,92.10783756835937C40.62407885009766,92.56933756835937,41.162408850097655,93.22528756835938,41.480298850097654,93.99273756835937C41.798178850097656,94.76018756835937,41.881358850097655,95.60466756835937,41.71929885009766,96.41938756835937C41.557238850097654,97.23410756835938,41.15722885009765,97.98247756835937,40.56984885009766,98.56985756835937C39.98246885009765,99.15723756835938,39.23409885009766,99.55724756835937,38.41937885009766,99.71930756835937C37.60465885009766,99.88136756835938,36.76017885009766,99.79818756835937,35.992728850097656,99.48029756835938C35.22527885009766,99.16241756835937,34.569328850097655,98.62408756835937,34.107828850097654,97.93339756835937C33.64632885009765,97.24271756835938,33.39999885009766,96.43068756835937,33.39999885009766,95.60000756835937C33.39999885009766,94.48609756835937,33.842498850097655,93.41780756835938,34.630148850097655,92.63015756835938C35.41780885009766,91.84250756835938,36.48608885009766,91.40000756835937,37.599998850097656,91.40000756835937C37.599998850097656,91.40000756835937,37.599998850097656,91.40000756835937,37.599998850097656,91.40000756835937C37.599998850097656,91.40000756835937,37.599998850097656,91.40000756835937,37.599998850097656,91.40000756835937Z" fill="#FFFFFF" fill-opacity="1"/></g></g></g></g></g></g></svg>
          </div>
          <vs-table striped style="width: 100%" v-if="donationTotal != 0">
            <template #thead>
              <vs-tr>
                <vs-th style="width: 320px"> 捐款账户 </vs-th>
                <vs-th style="width: 80px"> 捐款金额 </vs-th>
                <vs-th style="width: 200px"> 捐款时间 </vs-th>
                <vs-th style="width: 100px"> 支付方式 </vs-th>
                <vs-th style="width: 80px"> 交易状态 </vs-th>
                <vs-th style="width: 80px"> 捐款来源 </vs-th>
                <vs-th style="width: 320px"> 受助账户 </vs-th>
                <vs-th style="width: 100px"> 操作 </vs-th>
              </vs-tr>
            </template>
            <template #tbody>
              <vs-tr
                  v-for="(item, i) in getPage(donationTrace, queryParams.pageNum, queryParams.pageSize)"
                  :key="i"
                  :data="item"
              >
                <vs-td>
                  {{ item.donorAddress }}
                </vs-td>
                <vs-td>
                  {{ item.amount }} ￥
                </vs-td>
                <vs-td>
                  {{ item.transTime }}
                </vs-td>
                <vs-td>
                  {{ item.transType }}
                </vs-td>
                <vs-td>
                  {{ item.isDonation }}
                </vs-td>
                <vs-td>
                  {{ item.source }}
                </vs-td>
                <vs-td>
                  {{ item.destAddress }}
                </vs-td>
                <vs-td>
                  <div class="view" @click="handleOpenDonationDialog(item)">
                    🍳
                  </div>
                </vs-td>
              </vs-tr>
            </template>
            <template #footer>
              <vs-pagination
                  v-model:current-page="queryParams.pageNum"
                  v-model:page-size="queryParams.pageSize"
                  :page-sizes="[3, 5, 7]"
                  :total="donationTotal"
                  not-margin
              />
            </template>
          </vs-table>
        </div>
      </div>
    </div>
  </div>

  <vs-dialog v-model="activiteDialog" lock-scroll full-screen overlay-blur>
    <template #header>
      <h4 class="not-margin">Welcome to <b>Vuesax</b></h4>
    </template>



    <template #footer>

    </template>
  </vs-dialog>

  <vs-dialog v-model="donationDialog" lock-scroll full-screen overlay-blur>
    <template #header>
      <h4 class="not-margin">Welcome to <b>Vuesax</b></h4>
    </template>

    <div class="con-form">

    </div>

    <template #footer>

    </template>
  </vs-dialog>
</template>

<script setup>
import {
  SearchFavorite1Bold
} from '@vuesax-alpha/icons-vue'
import {onMounted, reactive, ref, toRefs} from "vue";
import {getPage, VsLoadingFn} from 'vuesax-alpha'
import {selectTraceByCardId} from "@/api/charity/trace.js";
import {useRouter} from "vue-router";

const route = useRouter()
const page = ref(1)
const cardId = ref("")
const activiteTotal = ref(0)
const donationTotal = ref(0)
const activiteDialog = ref(false)
const donationDialog = ref(false)
const activityId = ref()
const data = reactive({
  queryParams: {
    pageNum: 1,
    pageSize: 5
  },
  activiteTrace: [],
  donationTrace: [],
})
const {activiteTrace,donationTrace,queryParams} = toRefs(data)
function handleOpenActiviteDialog(item){
  route.push({
    name: 'material_detail',
    query: {
      activityId: item.charityId
    }
  })
}

function handleOpenDonationDialog(item){
  route.push({
    name: 'donation_detail',
    query: {
      donationId: item.donationId
    }
  })
}

function handleSearch(){
  selectTraceByCardId({cardId: cardId.value}).then(res => {
    if (res.code == 200) {
      console.log(res)
      activiteTrace.value = res.activiteTrace.rows
      donationTrace.value = res.donationTrace.rows
      activiteTotal.value = res.activiteTrace.total
      donationTotal.value = res.donationTrace.total

      const loadingInstance = VsLoadingFn()
      setTimeout(() => {
        loadingInstance.close()
      }, 1000)
    }
  })

}
onMounted(() => {

})
</script>

<style scoped>
.trace_container {
  display: flex;
  flex-direction: column;
}

.trace_table {
  margin: 30px 10px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.trace_table > .table__card {
  display: flex;
  justify-content: center;
}

:deep(.vs-table) {
  margin-top: 20px;
}

.table__card {
  width: 85%;
  background-color: white;
  margin-bottom: 20px;
  border-radius: 20px;
  gap: 10px;
  border: 2px solid transparent;
  transition: all 0.3s ease-in-out;
  cursor: pointer;
  box-shadow: 3px 3px 7px 7px rgba(0, 0, 0, 0.1);
  display: flex;
  flex-direction: column;
  align-items: center;
  padding-bottom: 15px;

}


.card__title {
  font-family: '微软雅黑', Arial, sans-serif; /* 使用指定的字体 */
  font-size: 18px; /* 字体大小 */
  font-weight: bold; /* 字体粗细 */
  color: #333; /* 字体颜色 */
  text-transform: uppercase; /* 将文本转换为大写 */
  letter-spacing: 2px; /* 字符间距 */
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3); /* 文字阴影 */
  margin-top: 10px;
}

.view {
  display: inline-block;
  font-weight: bold;
  text-decoration: none;
  text-align: center;
  color: #fff;
  background-color: #007bff;
  border: 2px solid #007bff;
  cursor: pointer;
  border-radius: 50px;
  transition: background-color 0.3s, color 0.3s, border-color 0.3s;
}

.view:hover {
  background-color: #0056b3;
  border-color: #0056b3;
}

.view:active {
  transform: scale(0.95); /* 点击时缩小按钮 */
}
</style>
